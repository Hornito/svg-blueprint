!function(){Math.sign||(Math.sign=function(t){return(t>0)-(t<0)||+t}),NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),Object.entries||(Object.entries=function(t){for(var e=Object.keys(t),n=e.length,o=[];n--;)o[n]=[e[n],t[e[n]]];return o});function t(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,o)}return n}function e(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var n=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=n.className,i=function(t,e){if(null==t)return{};var n,o,i=function(t,e){if(null==t)return{};var n,o,i={},r=Object.keys(t);for(o=0;o<r.length;o++)n=r[o],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(o=0;o<r.length;o++)n=r[o],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}(n,["className"]),r=document.createElement("div");r.innerHTML=function(t){var e=t.uid,n=t.width,o=t.height,i=t.className,r=t.backgroundColor,s=t.gridColor,a=t.gridOpacity,c=t.cursorColor,l=t.cursorOpacity,u=t.axisColor,h=t.axisOpacity,d=t.statusbarColor,p=t.statusbarBgColor;return'\n  <div class="'.concat(i," ").concat(i,"-").concat(e,'" style="width: ').concat(n,"; height: ").concat(o,'; overflow: hidden; position: relative;">\n    <svg class="').concat(i,'-canvas" style="width: 100%; height: 100%; min-width: 1000px; min-height: 1000px;">\n      <defs>\n        <pattern id="').concat(i,'-grid-pattern-10" width=".1" height=".1">\n          <line x1="0" y1="0" x2="100%" y2="0" stroke="').concat(s,'" stroke-width="1"></line>\n          <line x1="0" y1="0" x2="0" y2="100%" stroke="').concat(s,'" stroke-width="1"></line>\n        </pattern>\n        <pattern id="').concat(i,'-grid-pattern-100" width="1" height="1">\n          <line x1="0" y1="0" x2="100%" y2="0" stroke="').concat(s,'" stroke-width="2"></line>\n          <line x1="0" y1="0" x2="0" y2="100%" stroke="').concat(s,'" stroke-width="2"></line>\n        </pattern>\n        <pattern id="').concat(i,'-grid-pattern" patternUnits="userSpaceOnUse" width="100" height="100" x="0" y="0">\n          <rect class="').concat(i,'-grid-10" width="100" height="100" fill="url(#').concat(i,'-grid-pattern-10)"></rect>\n          <rect class="').concat(i,'-grid-100" width="100%" height="100%" fill="url(#').concat(i,'-grid-pattern-100)"></rect>\n        </pattern>\n      </defs>\n      <rect class="').concat(i,'-background" width="100%" height="100%" fill="').concat(r,'"></rect>\n      <rect class="').concat(i,'-grid" width="100%" height="100%" opacity="').concat(a,'" fill="url(#').concat(i,'-grid-pattern)"></rect>\n      <g class="').concat(i,'-axis" transform="translate(0 0)" style="opacity: ').concat(h,';">\n        <line x1="-10000%" y1="0" x2="10000%" y2="0" stroke="').concat(u,'" stroke-width="2"></line>\n        <line x1="0" y1="-10000%" x2="0" y2="10000%" stroke="').concat(u,'" stroke-width="2"></line>\n      </g>\n      <g class="').concat(i,'-workspace" transform="translate(0 0) scale(1)"></g>\n      <g class="').concat(i,'-cursor" transform="translate(0 0)" style="display: none; opacity: ').concat(l,';">\n        <line x1="-10000%" y1="0" x2="10000%" y2="0" stroke="').concat(c,'" stroke-width="2"></line>\n        <line x1="0" y1="-10000%" x2="0" y2="10000%" stroke="').concat(c,'" stroke-width="2"></line>\n      </g>\n    </svg>\n    <div class="').concat(i,'-statusbar" style="position: absolute; bottom: 4px; left: 4px;">\n      <span class="').concat(i,'-statusbar-text" style="background-color: ').concat(p,"; color: ").concat(d,'; display: inline-block; white-space: nowrap; margin: 4px; padding: 4px 8px; border-radius: 4px; text-transform: uppercase; font-family: monospace; font-size: 12px; border: 0px;">x: 0 y: 0 | zoom: 100%</span>\n      <button class="').concat(i,'-reset-view" style="background-color: ').concat(p,"; color: ").concat(d,'; margin: 4px; padding: 4px 8px; border-radius: 4px; text-transform: uppercase; font-family: monospace; font-size: 12px; border: 0px; cursor: pointer;">reset view</button>\n      <button class="').concat(i,'-center-view" style="background-color: ').concat(p,"; color: ").concat(d,'; margin: 4px; padding: 4px 8px; border-radius: 4px; text-transform: uppercase; font-family: monospace; font-size: 12px; border: 0px; cursor: pointer;">center view</button>\n      <button class="').concat(i,'-fit-view" style="background-color: ').concat(p,"; color: ").concat(d,'; margin: 4px; padding: 4px 8px; border-radius: 4px; text-transform: uppercase; font-family: monospace; font-size: 12px; border: 0px; cursor: pointer;">fit view</button>\n    </div>\n  </div>\n  ').trim()}(function(n){for(var o=1;o<arguments.length;o++){var i=null!=arguments[o]?arguments[o]:{};o%2?t(i,!0).forEach(function(t){e(n,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):t(i).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(i,t))})}return n}({className:o},i));var s=r.firstChild,a=s.querySelectorAll("*[id],*[class]"),c={root:s};return a.forEach(function(t){c[function(t,e){return function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t=function(t){return(t+"").replace(/^(.)|\s+(.)/g,function(t){return t.toUpperCase()})}(t.replace(/-/g," ")).replace(/ /g,""),e?t:t.charAt(0).toLowerCase()+t.slice(1)}((t.id||t.className.baseVal||t.className).replace("".concat(e,"-"),""))}(t,o)]=t}),c};function o(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var n=[],o=!0,i=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(o=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);o=!0);}catch(c){i=!0,r=c}finally{try{o||null==a.return||a.return()}finally{if(i)throw r}}return n}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var i=!1;try{var r=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("testPassive",null,r),window.removeEventListener("testPassive",null,r)}catch(j){}function s(t,e,n){var o=!!i&&{passive:!0};t.addEventListener(e,n,o)}function a(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if("string"!=typeof e)for(var i=0,r=Object.entries(e);i<r.length;i++){var a=o(r[i],2);s(t,a[0],a[1])}else s(t,e,n)}function c(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if("string"!=typeof e)for(var i=0,r=Object.entries(e);i<r.length;i++){var s=o(r[i],2),a=s[0],c=s[1];t.style[a]=c}else t.style[e]=n}var l={addPassiveEventListener:s,addEvent:a,setAttribute:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if("string"!=typeof e)for(var i=0,r=Object.entries(e);i<r.length;i++){var s=o(r[i],2),l=s[0],u=s[1];"events"===l?a(t,u):"style"===l?c(t,u):t.setAttribute(l,u)}else t.setAttribute(e,n)}};function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,o)}return n}function h(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function d(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var p=l.addPassiveEventListener,f=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=n.target,i=n.callbacks,r=void 0===i?{}:i;!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),this.target=o,this.callbacks=r,this.panning=!1,this.mouse={x:0,y:0},this.movement={x:0,y:0},p(this.target,"mousedown",function(t){e.onMouseDown(t)}),p(this.target,"mousemove",function(t){e.onMouseMove(t)}),p(this.target,"mouseup",function(t){e.onMouseUp(t)}),p(this.target,"touchstart",function(t){var n=t.changedTouches[0];e.onMouseDown(n)}),p(this.target,"touchmove",function(t){var n=t.changedTouches[0];e.onMouseMove(n)}),p(this.target,"touchend",function(t){var n=t.changedTouches[0];e.onMouseUp(n)})}var e,n;return e=t,(n=[{key:"emit",value:function(t){this.callbacks[t]&&this.callbacks[t](this)}},{key:"updateMousePosition",value:function(t){var e=this.target.getBoundingClientRect();this.mouse.x=t.pageX-e.left,this.mouse.y=t.pageY-e.top}},{key:"onMouseDown",value:function(t){this.panning=!0,this.updateMousePosition(t),this.emit("start")}},{key:"onMouseMove",value:function(t){var e=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(n,!0).forEach(function(e){h(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},this.mouse);this.updateMousePosition(t),this.movement.x=this.mouse.x-e.x,this.movement.y=this.mouse.y-e.y,this.emit("move"),!1!==this.panning&&this.emit("pan")}},{key:"onMouseUp",value:function(t){this.panning=!1,this.updateMousePosition(t),this.emit("end")}}])&&d(e.prototype,n),t}();function v(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var y=l.addPassiveEventListener,g=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=n.target,i=n.callbacks,r=void 0===i?{}:i;!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),this.target=o,this.callbacks=r,this.timeout=null,this.mouse={x:0,y:0},this.delta=0,y(this.target,"wheel",function(t){e.onMouseWheel(t)})}var e,n;return e=t,(n=[{key:"emit",value:function(t){this.callbacks[t]&&this.callbacks[t](this)}},{key:"updateMousePosition",value:function(t){var e=this.target.getBoundingClientRect();this.mouse.x=t.pageX-e.left,this.mouse.y=t.pageY-e.top}},{key:"onMouseWheel",value:function(t){var e=this;this.updateMousePosition(t),this.delta=Math.sign(t.deltaY),null===this.timeout&&this.emit("start"),this.emit("zoom"),clearTimeout(this.timeout),this.timeout=setTimeout(function(){e.timeout=null,e.emit("end")},120)}}])&&v(e.prototype,n),t}(),m="http://www.w3.org/2000/svg",b=function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=null;return"<"===t.charAt(0)?(e='<svg xmlns="'+m+'">'+t+"</svg>",o=(new DOMParser).parseFromString(e,"application/xml").documentElement.firstChild):o=document.createElementNS(m,t),null!==n&&l.setAttribute(o,n),o};function w(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,o)}return n}function x(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function k(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var O=0,P=function(){function t(){var e=this,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=o.width,r=void 0===i?"100%":i,s=o.height,a=void 0===s?"100%":s,c=o.parentSelector,u=void 0===c?"body":c,h=o.className,d=void 0===h?"svg-blueprint":h,p=o.backgroundColor,v=void 0===p?"#3177C6":p,y=o.gridColor,m=void 0===y?"#fff":y,b=o.gridOpacity,w=void 0===b?.3:b,x=o.cursorColor,k=void 0===x?"#0b64c4":x,P=o.cursorOpacity,j=void 0===P?1:P,C=o.axisColor,S=void 0===C?"#f4b916":C,E=o.axisOpacity,M=void 0===E?.5:E,z=o.statusbarColor,A=void 0===z?"#333":z,D=o.statusbarBgColor,L=void 0===D?"#fff":D,V=(o.statusbarPosition,o.centerView),B=void 0===V||V,N=o.zoomFactor,T=void 0===N?.05:N,W=o.zoomDirection,F=void 0===W?1:W,U=o.zoomLimit,Z=void 0===U?{min:1e-4,max:1e4}:U,G=o.fitViewPadding,R=void 0===G?50:G,H=o.nonScalingStroke,Y=void 0===H||H,q=o.strokeWidth,I=void 0===q?2:q,X=o.stroke,$=void 0===X?"#fff":X,J=o.fill,K=void 0===J?"none":J;if(function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),this.uid=O++,this.mouse={x:0,y:0},this.coords={x:0,y:0},this.position={x:0,y:0},this.scale=1,this.zoomFactor=T,this.zoomLimit=Z,this.zoomDirection=Math.sign(F),this.fitViewPadding=2*R,this.nonScalingStroke=Y,this.strokeWidth=I,this.stroke=$,this.fill=K,this.parent=document.querySelector(u),!this.parent)throw new Error("No parent found with the selector [".concat(u,"]"));this.elements=n({uid:O,width:r,height:a,className:d,backgroundColor:v,gridColor:m,gridOpacity:w,cursorColor:k,cursorOpacity:j,axisColor:S,axisOpacity:M,statusbarColor:A,statusbarBgColor:L}),this.parent.appendChild(this.elements.root),document.body.style.overscrollBehavior="contain",new f({target:this.parent,callbacks:{move:function(t){return e.onMouseMove(t)},start:function(t){return e.onPanStart(t)},pan:function(t){return e.onPan(t)},end:function(t){return e.onPanEnd(t)}}}),new g({target:this.parent,callbacks:{start:function(t){return e.onZoomStart(t)},zoom:function(t){return e.onZoom(t)},end:function(t){return e.onZoomEnd(t)}}}),l.addEvent(this.elements.resetView,"click",function(t){e.zoom({scale:1}),e.centerView()}),l.addEvent(this.elements.centerView,"click",function(t){e.centerView()}),l.addEvent(this.elements.fitView,"click",function(t){e.fitView()}),B&&this.centerView()}var e,o;return e=t,(o=[{key:"updateStatusBar",value:function(){var t=Math.round(100*this.scale),e=t.toString().length-1,n=this.coords.x.toFixed(e),o=this.coords.y.toFixed(e);t<1&&(e=this.zoomLimit.min.toFixed(20).replace(/0+$/,"").length-4,t=(100*this.scale).toFixed(e));var i="x: ".concat(n," y: ").concat(o," | zoom: ").concat(t,"%");this.elements.statusbarText.innerHTML=i}},{key:"showCursor",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.elements.cursor.style.display=t?"block":"none"}},{key:"updateCursorPosition",value:function(){this.elements.cursor.setAttribute("transform","translate(".concat(this.mouse.x," ").concat(this.mouse.y,")"))}},{key:"updateGridPosition",value:function(){this.elements.gridPattern.setAttribute("x",this.position.x),this.elements.gridPattern.setAttribute("y",this.position.y)}},{key:"updateAxisPosition",value:function(){this.elements.axis.setAttribute("transform","translate(".concat(this.position.x," ").concat(this.position.y,")"))}},{key:"updateWorkspacePosition",value:function(){this.elements.workspace.setAttribute("transform","translate(".concat(this.position.x," ").concat(this.position.y,") scale(").concat(this.scale,")"));var t=this.nonScalingStroke?this.strokeWidth/this.scale:"none";this.elements.workspace.style.strokeWidth=t}},{key:"updatePositions",value:function(){this.updateGridPosition(),this.updateAxisPosition(),this.updateWorkspacePosition()}},{key:"updateGridSize",value:function(t){this.elements.grid10.setAttribute("width",t),this.elements.grid10.setAttribute("height",t),this.elements.gridPattern.setAttribute("width",t),this.elements.gridPattern.setAttribute("height",t)}},{key:"move",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.x,n=void 0===e?null:e,o=t.y,i=void 0===o?null:o;this.position.x=null===n?this.position.x:n,this.position.y=null===i?this.position.y:i,this.updatePositions()}},{key:"pan",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.x,n=void 0===e?0:e,o=t.y,i=void 0===o?0:o;this.move({x:this.position.x+n,y:this.position.y+i})}},{key:"zoom",value:function(t){var e=t.delta,n=void 0===e?null:e,o=t.scale,i=void 0===o?1:o,r=t.target,s=void 0===r?null:r,a=this.scale;null!==n?(n*=this.zoomDirection,this.scale+=n*this.zoomFactor*this.scale):this.scale=i,this.scale<this.zoomLimit.min?this.scale=this.zoomLimit.min:this.scale>this.zoomLimit.max&&(this.scale=this.zoomLimit.max);var c=100*parseFloat(this.scale.toString().replace(".","").replace(/e.*/,"").replace(/^0+/,"").replace(/^([1-9])/,"$1.")),l=((s=s||this.getCenterCoords()).x-this.position.x)/a,u=(s.y-this.position.y)/a,h={x:-l*this.scale+s.x,y:-u*this.scale+s.y};this.updateGridSize(c),this.move(h)}},{key:"getCenterCoords",value:function(){return{x:this.elements.root.offsetWidth/2,y:this.elements.root.offsetHeight/2}}},{key:"centerView",value:function(){this.move(this.getCenterCoords()),this.updateStatusBar()}},{key:"fitView",value:function(){var t=this.elements.workspace.getBoundingClientRect(),e=t.width/this.scale,n=t.height/this.scale;if(e&&n){var o=(this.elements.root.offsetWidth-this.fitViewPadding)/e,i=(this.elements.root.offsetHeight-this.fitViewPadding)/n,r=Math.min(o,i);this.zoom({scale:r});var s=this.elements.root.getBoundingClientRect();t=this.elements.workspace.getBoundingClientRect(),this.pan({x:-t.left+s.left+(s.width-t.width)/2,y:-t.top+s.top+(s.height-t.height)/2}),this.updateStatusBar()}else this.centerView()}},{key:"onMouseMove",value:function(t){this.mouse=t.mouse,this.coords={x:(this.mouse.x-this.position.x)/this.scale,y:(this.mouse.y-this.position.y)/this.scale},this.updateCursorPosition(),this.updateStatusBar()}},{key:"onPanStart",value:function(t){this.showCursor(!0)}},{key:"onPan",value:function(t){this.pan(t.movement)}},{key:"onPanEnd",value:function(t){this.showCursor(!1)}},{key:"onZoomStart",value:function(t){this.showCursor(!0)}},{key:"onZoom",value:function(t){this.onMouseMove(t),this.zoom({delta:t.delta,target:this.mouse})}},{key:"onZoomEnd",value:function(t){this.showCursor(!1)}},{key:"createElement",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return b(t,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?w(n,!0).forEach(function(e){x(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({"stroke-width":"none",stroke:this.stroke,fill:this.fill},e))}},{key:"append",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.createElement(t,e);return this.elements.workspace.appendChild(n),n}}])&&k(e.prototype,o),t}();window.SVGBlueprint=P}();